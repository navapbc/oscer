# SSO Role Mapping Configuration
#
# Maps IdP (Identity Provider) groups to OSCER application roles.
# When a user logs in via SSO, their group memberships are checked
# against this configuration to determine their OSCER role.
#
# Structure:
#   Each environment section contains:
#   - role_mappings: Hash mapping OSCER role names to arrays of IdP group names
#   - no_match_behavior: What to do when user's groups don't match any role
#       - "deny": Reject the login (user cannot access OSCER)
#       - "assign_default": Assign the default_role
#   - default_role: Role to assign when no_match_behavior is "assign_default"
#
# Notes:
#   - Group matching is case-insensitive
#   - First matching role wins (order matters)
#   - Multiple IdP groups can map to the same OSCER role
#   - Role priority is determined by order - roles listed first take precedence
#
# Usage:
#   RoleMapper automatically loads config for Rails.env

default: &default
  no_match_behavior: deny
  default_role: null

development:
  <<: *default
  role_mappings:
    admin:
      - "OSCER-Admin"
      - "CE-Administrators"
    caseworker:
      - "OSCER-Caseworker"
      - "OSCER-Staff"
      - "CE-Staff"

test:
  <<: *default
  role_mappings:
    admin:
      - "OSCER-Admin"
      - "CE-Administrators"
    caseworker:
      - "OSCER-Caseworker"
      - "OSCER-Staff"
      - "CE-Staff"

production:
  <<: *default
  role_mappings:
    admin:
      - "OSCER-Admin"
      - "CE-Administrators"
    caseworker:
      - "OSCER-Caseworker"
      - "OSCER-Staff"
      - "CE-Staff"

# mock-production environment (for local production-like testing)
mock-production:
  <<: *default
  role_mappings:
    admin:
      - "OSCER-Admin"
      - "CE-Administrators"
    caseworker:
      - "OSCER-Caseworker"
      - "OSCER-Staff"
      - "CE-Staff"
