<%
  information_requests = InformationRequest.for_application_forms([application_form.id]).order(created_at: :desc)
%>
<% if information_requests.any? %>
  <h2><%= t("information_requests.list.heading") %></h2>
  <table class="usa-table usa-table--borderless width-full">
    <thead>
      <tr>
        <th scope="col"><%= t("information_requests.list.staff_comment") %></th>
        <th scope="col"><%= t("information_requests.list.member_comment") %></th>
        <th scope="col"><%= t("information_requests.list.due_date") %></th>
        <th scope="col"><%= t("information_requests.list.supporting_documents") %></th>
      </tr>
    </thead>
    <tbody>
      <% information_requests.each do |information_request| %>
        <tr>
          <td><%= information_request.staff_comment %></td>
          <td><%= information_request.member_comment || "N/A" %></td>
          <td><%= information_request.due_date&.strftime("%m/%d/%Y") %></td>
          <td>
            <% if information_request.supporting_documents.any? %>
              <ul class="usa-list usa-list--unstyled margin-0">
                <% information_request.supporting_documents.each do |document| %>
                  <li>
                    <%= link_to document.filename, rails_blob_path(document, disposition: "attachment"),
                        target: "_blank", class: "usa-link" %>
                  </li>
                <% end %>
              </ul>
            <% else %>
              <span>No documents</span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
